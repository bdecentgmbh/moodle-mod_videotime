{"version":3,"file":"selecttrack.min.js","sources":["../src/selecttrack.js"],"sourcesContent":["/*\n * Show selected text track\n *\n * @package    mod_videotime\n * @module     mod_videotime/selecttrrack\n * @copyright  2021 bdecent gmbh <https://bdecent.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Intialize listener and show current track\n */\nexport const initialize = () => {\n    let url = new URL(window.location.href),\n        lang = url.searchParams.get('lang');\n\n    window.removeEventListener('change', handleChange);\n    document.querySelectorAll('form.videotimetab_texttrack_selectlang').forEach((form) => {\n        if (lang) {\n            form.querySelector('select option[value=\"' + lang + '\"]').setAttribute('selected', true);\n        }\n        setLanguage(form);\n    });\n    window.addEventListener('change', handleChange);\n};\n\n/**\n * Form change event handler\n *\n * @param {event} e mouse event\n */\nconst handleChange = (e) => {\n    let form = e.target.closest('form.videotimetab_texttrack_selectlang');\n    if (form) {\n        e.stopPropagation();\n        e.preventDefault();\n        setLanguage(form);\n    }\n};\n\n/**\n * Show lang indicate by form\n *\n * @param {element} form\n */\nconst setLanguage = (form) => {\n    let data = new FormData(form);\n    form.closest('.tab-pane').querySelectorAll('.texttracks .row').forEach((row) => {\n        if (row.getAttribute('data-lang') == data.get('lang')) {\n            row.style.display = null;\n        } else {\n            row.style.display = 'none';\n        }\n    });\n};\n"],"names":["lang","URL","window","location","href","searchParams","get","removeEventListener","handleChange","document","querySelectorAll","forEach","form","querySelector","setAttribute","setLanguage","addEventListener","e","target","closest","stopPropagation","preventDefault","data","FormData","row","getAttribute","style","display"],"mappings":"mLAY0B,SAElBA,KADM,IAAIC,IAAIC,OAAOC,SAASC,MACnBC,aAAaC,IAAI,QAEhCJ,OAAOK,oBAAoB,SAAUC,cACrCC,SAASC,iBAAiB,0CAA0CC,SAASC,OACrEZ,MACAY,KAAKC,cAAc,wBAA0Bb,KAAO,MAAMc,aAAa,YAAY,GAEvFC,YAAYH,SAEhBV,OAAOc,iBAAiB,SAAUR,qBAQhCA,aAAgBS,QACdL,KAAOK,EAAEC,OAAOC,QAAQ,0CACxBP,OACAK,EAAEG,kBACFH,EAAEI,iBACFN,YAAYH,QASdG,YAAeH,WACbU,KAAO,IAAIC,SAASX,MACxBA,KAAKO,QAAQ,aAAaT,iBAAiB,oBAAoBC,SAASa,MAChEA,IAAIC,aAAa,cAAgBH,KAAKhB,IAAI,QAC1CkB,IAAIE,MAAMC,QAAU,KAEpBH,IAAIE,MAAMC,QAAU"}