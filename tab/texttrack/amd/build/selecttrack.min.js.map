{"version":3,"sources":["../src/selecttrack.js"],"names":["initialize","url","URL","window","location","href","lang","searchParams","get","removeEventListener","handleChange","document","querySelectorAll","forEach","form","querySelector","setAttribute","setLanguage","addEventListener","e","target","closest","stopPropagation","preventDefault","data","FormData","row","getAttribute","style","display"],"mappings":"oKAY0B,QAAbA,CAAAA,UAAa,EAAM,CAC5B,GAAIC,CAAAA,CAAG,CAAG,GAAIC,CAAAA,GAAJ,CAAQC,MAAM,CAACC,QAAP,CAAgBC,IAAxB,CAAV,CACIC,CAAI,CAAGL,CAAG,CAACM,YAAJ,CAAiBC,GAAjB,CAAqB,MAArB,CADX,CAGAL,MAAM,CAACM,mBAAP,CAA2B,QAA3B,CAAqCC,CAArC,EACAC,QAAQ,CAACC,gBAAT,CAA0B,wCAA1B,EAAoEC,OAApE,CAA4E,SAACC,CAAD,CAAU,CAClF,GAAIR,CAAJ,CAAU,CACNQ,CAAI,CAACC,aAAL,CAAmB,yBAA0BT,CAA1B,CAAiC,KAApD,EAA0DU,YAA1D,CAAuE,UAAvE,IACH,CACDC,CAAW,CAACH,CAAD,CACd,CALD,EAMAX,MAAM,CAACe,gBAAP,CAAwB,QAAxB,CAAkCR,CAAlC,CACH,C,IAOKA,CAAAA,CAAY,CAAG,SAACS,CAAD,CAAO,CACxB,GAAIL,CAAAA,CAAI,CAAGK,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiB,wCAAjB,CAAX,CACA,GAAIP,CAAJ,CAAU,CACNK,CAAC,CAACG,eAAF,GACAH,CAAC,CAACI,cAAF,GACAN,CAAW,CAACH,CAAD,CACd,CACJ,C,CAOKG,CAAW,CAAG,SAACH,CAAD,CAAU,CAC1B,GAAIU,CAAAA,CAAI,CAAG,GAAIC,CAAAA,QAAJ,CAAaX,CAAb,CAAX,CACAA,CAAI,CAACO,OAAL,CAAa,WAAb,EAA0BT,gBAA1B,CAA2C,kBAA3C,EAA+DC,OAA/D,CAAuE,SAACa,CAAD,CAAS,CAC5E,GAAIA,CAAG,CAACC,YAAJ,CAAiB,WAAjB,GAAiCH,CAAI,CAAChB,GAAL,CAAS,MAAT,CAArC,CAAuD,CACnDkB,CAAG,CAACE,KAAJ,CAAUC,OAAV,CAAoB,IACvB,CAFD,IAEO,CACHH,CAAG,CAACE,KAAJ,CAAUC,OAAV,CAAoB,MACvB,CACJ,CAND,CAOH,C","sourcesContent":["/*\n * Show selected text track\n *\n * @package    mod_videotime\n * @module     mod_videotime/selecttrrack\n * @copyright  2021 bdecent gmbh <https://bdecent.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Intialize listener and show current track\n */\nexport const initialize = () => {\n    let url = new URL(window.location.href),\n        lang = url.searchParams.get('lang');\n\n    window.removeEventListener('change', handleChange);\n    document.querySelectorAll('form.videotimetab_texttrack_selectlang').forEach((form) => {\n        if (lang) {\n            form.querySelector('select option[value=\"' + lang + '\"]').setAttribute('selected', true);\n        }\n        setLanguage(form);\n    });\n    window.addEventListener('change', handleChange);\n};\n\n/**\n * Form change event handler\n *\n * @param {event} e mouse event\n */\nconst handleChange = (e) => {\n    let form = e.target.closest('form.videotimetab_texttrack_selectlang');\n    if (form) {\n        e.stopPropagation();\n        e.preventDefault();\n        setLanguage(form);\n    }\n};\n\n/**\n * Show lang indicate by form\n *\n * @param {element} form\n */\nconst setLanguage = (form) => {\n    let data = new FormData(form);\n    form.closest('.tab-pane').querySelectorAll('.texttracks .row').forEach((row) => {\n        if (row.getAttribute('data-lang') == data.get('lang')) {\n            row.style.display = null;\n        } else {\n            row.style.display = 'none';\n        }\n    });\n};\n"],"file":"selecttrack.min.js"}