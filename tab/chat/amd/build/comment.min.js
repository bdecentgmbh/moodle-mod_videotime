define("videotimetab_chat/comment",["exports","core/ajax","core/notification","core/log"],(function(_exports,_ajax,_notification,_log){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * Change comments
   *
   * @package    videotimetab_chat
   * @module     videotimetab_chat/refresh
   * @copyright  2022 bdecent gmbh <https://bdecent.de>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_log=_interopRequireDefault(_log);var _default={init:function(contextid,selector,instanceid){new ResizeObserver((entries=>{for(const entry of entries){const comments=entry.target.querySelector(".videotimetab_chat");comments&&comments.scrollHeight&&0==comments.scrollTop&&(_log.default.debug(comments.scrollHeight),comments.scrollTop=comments.scrollHeight)}})).observe(document.querySelector(selector)),document.querySelector(selector).addEventListener("click",(e=>{const button=e.target.closest('[data-type="comments"] [data-action]');if(button){const textarea=button.closest('[data-type="comments"]').querySelector("textarea");switch(e.preventDefault(),e.stopPropagation(),button.getAttribute("data-action")){case"addcomment":textarea.textLength&&_ajax.default.call([{methodname:"videotimetab_chat_add_comments",args:{comments:[{content:textarea.value,contextlevel:"module",instanceid:instanceid,itemid:0,component:"videotimetab_chat",area:"chat"}]},fail:_notification.default.exception,done:()=>{textarea.value=""}}]);break;case"delete":_ajax.default.call([{contextid:contextid,methodname:"videotimetab_chat_delete_comments",args:{comments:[button.closest("[data-comment]").getAttribute("data-comment")]},fail:_notification.default.exception}])}}}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=comment.min.js.map