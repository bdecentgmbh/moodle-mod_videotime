define(["jquery","mod_videotime/player","core/ajax"],function(a,b,c){return{init:function(a,d,e){console.log("INIT",a);var f=new b("vimeo-embed",{responsive:1});if(e){var g=!1,h=0;f.on("play",function(){g=!0}),f.on("playing",function(){g=!0}),f.on("timeupdate",function(){g=!0}),f.on("pause",function(){g=!1}),f.on("ended",function(){g=!1}),f.on("stalled",function(){g=!1}),f.on("suspend",function(){g=!1}),f.on("abort",function(){g=!1}),f.on("ended",function(){c.call([{methodname:"videotimeplugin_pro_set_session_state",args:{session_id:a.id,state:1}}])}),setInterval(function(){g&&(h++,h%d===0&&c.call([{methodname:"videotimeplugin_pro_record_watch_time",args:{session_id:a.id,time:h}}]))},1e3)}}}});