define ("mod_videotime/resize_tab_player",["mod_videotime/player","core/notification"],function(a,b){var c=function(){this.initialize()};c.prototype.column="";c.prototype.initialize=function(){var a=this,b=new ResizeObserver(a.resize),c=new MutationObserver(a.resize);c.observe(document.querySelector("#page-content"),{subtree:!0,childList:!0});document.querySelectorAll(".instance-container, div.videotime-tab-instance").forEach(function(a){b.observe(a)});a.resize();document.querySelectorAll(".videotime-tab-instance").forEach(function(a){a.style.position="absolute"});window.removeEventListener("mousemove",a.mousemoveHandler);window.addEventListener("mousemove",a.mousemoveHandler);window.removeEventListener("dragstart",a.dragstartHandler);window.addEventListener("dragstart",a.dragstartHandler);window.removeEventListener("mouseup",a.dragendHandler);window.addEventListener("mouseup",a.dragendHandler);window.removeEventListener("click",a.cueVideo);window.addEventListener("click",a.cueVideo)};c.prototype.resize=function(){document.querySelectorAll(".instance-container").forEach(function(a){if(!a.offsetWidth){return}a.closest(".videotimetabs").querySelectorAll(".videotime-tab-instance .vimeo-embed iframe").forEach(function(b){var c=b.closest(".videotime-tab-instance"),d=b.closest(".tab-content");Object.assign(c.style,{top:a.offsetTop+"px",left:a.offsetLeft+"px",width:a.offsetWidth+"px"});a.style.minHeight=b.closest(".videotime-tab-instance").offsetHeight+"px";d.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){Object.assign(a.style,{height:d.offsetHeight+"px",left:d.offsetLeft+"px",top:d.offsetTop+"px",width:d.offsetWidth+"px"})})})})};c.prototype.dragendHandler=function(){document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="none"})};c.prototype.dragstartHandler=function(a){if(a.target.classList.contains("videotimetab-resize-handle")){this.column=a.target.closest(".tab-pane").querySelector(".videotimetab-resize");a.stopPropagation();a.preventDefault();document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="block"})}};c.prototype.mousemoveHandler=function(a){var b=this;document.querySelectorAll(".videotimetab-resize-handle").forEach(function(c){if(c.closest(".tab-pane")&&"block"==document.querySelector(".videotime-tab-instance-cover").style.display){b.column.style.width=a.pageX-b.column.getBoundingClientRect().left+"px"}})};c.prototype.cueVideo=function(c){if(c.target.matches("[data-action=\"cue\"]")){var d=c.target.closest("a").getAttribute("data-start"),e=d.match(/((([0-9]+):)?(([0-9]+):))?([0-9]+(\.[0-9]+))/),f=c.target.closest(".videotimetabs").querySelector(".vimeo-embed iframe"),g=new a(f);c.preventDefault();c.stopPropagation();if(e){g.setCurrentTime(3600*+(e[3]||0)+60*+(e[5]||0)+ +e[6]).then(g.play.bind(g)).catch(b.exception)}}};return{init:function init(){return new c}}});
//# sourceMappingURL=resize_tab_player.min.js.map
