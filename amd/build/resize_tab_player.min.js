define ("mod_video-time-premium/resize_tab_player",["mod_videotime/player","core/notification"],function(a,b){var c=function(){this.initialize()};c.prototype.column="";c.prototype.initialize=function(){var a=this,b=new ResizeObserver(a.resize),c=new MutationObserver(a.resize);c.observe(document.body,{subtree:!0,childList:!0});document.querySelectorAll(".instance-container, div.videotime-tab-instance").forEach(function(a){b.observe(a)});document.querySelectorAll(".videotime-tab-instance").forEach(function(a){a.style.position="absolute"});a.resize();window.removeEventListener("mousemove",a.mousemoveHandler);window.addEventListener("mousemove",a.mousemoveHandler);window.removeEventListener("dragstart",a.dragstartHandler);window.addEventListener("dragstart",a.dragstartHandler);window.removeEventListener("mouseup",a.dragendHandler);window.addEventListener("mouseup",a.dragendHandler);window.removeEventListener("click",a.cueVideo);window.addEventListener("click",a.cueVideo)};c.prototype.resize=function(){document.querySelectorAll(".instance-container").forEach(function(a){if(!a.offsetWidth){return}a.closest(".videotimetabs").querySelectorAll(".videotime-tab-instance").forEach(function(b){var c=a.closest(".videotimetabs").querySelector(".tab-content"),d=0;Object.assign(b.style,{top:a.offsetTop+"px",left:a.offsetLeft+"px",maxWidth:a.offsetWidth+"px",width:a.offsetWidth+"px"});a.closest(".videotimetabs").querySelectorAll("ul .nav-link, ul .nav-item").forEach(function(a){d++;if(a.classList.contains("active")){b.setAttribute("data-tab",d)}});a.style.minHeight=b.offsetHeight+5+"px";a.closest(".videotimetabs").querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){Object.assign(a.style,{height:c.offsetHeight+"px",left:c.offsetLeft+"px",top:c.offsetTop+"px",width:c.offsetWidth+"px"})})})})};c.prototype.dragendHandler=function(){document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="none"})};c.prototype.dragstartHandler=function(a){if(a.target.classList.contains("videotimetab-resize-handle")){this.column=a.target.closest(".tab-pane").querySelector(".videotimetab-resize");a.stopPropagation();a.preventDefault();document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="block"})}};c.prototype.mousemoveHandler=function(a){var b=this;document.querySelectorAll(".videotimetab-resize-handle").forEach(function(c){if(c.closest(".tab-pane")&&"block"==document.querySelector(".videotime-tab-instance-cover").style.display){b.column.style.width=a.pageX-b.column.getBoundingClientRect().left+"px"}})};c.prototype.cueVideo=function(c){if(c.target.closest("[data-action=\"cue\"]")){var d=c.target.closest("a").getAttribute("data-start"),e=d.match(/((([0-9]+):)?(([0-9]+):))?([0-9]+(\.[0-9]+)?)/),f=c.target.closest(".videotimetabs").querySelector(".vimeo-embed iframe"),g=new a(f);c.preventDefault();c.stopPropagation();if(e){g.setCurrentTime(3600*+(e[3]||0)+60*+(e[5]||0)+ +e[6]).then(g.play.bind(g)).catch(b.exception)}}};return{init:function init(){return new c}}});
//# sourceMappingURL=resize_tab_player.min.js.map
