define ("mod_videotime/resize_tab_player",["exports","mod_videotime/player","core/notification"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.initialize=void 0;b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}var f;a.initialize=function initialize(){var a=new ResizeObserver(g),b=new MutationObserver(g);b.observe(document.querySelector("#page-content"),{subtree:!0,childList:!0});document.querySelectorAll(".instance-container, div.videotime-tab-instance").forEach(function(b){a.observe(b)});g();document.querySelectorAll(".videotime-tab-instance").forEach(function(a){a.style.position="absolute"});window.removeEventListener("mousemove",j);window.addEventListener("mousemove",j);window.removeEventListener("dragstart",i);window.addEventListener("dragstart",i);window.removeEventListener("mouseup",h);window.addEventListener("mouseup",h);window.removeEventListener("click",k);window.addEventListener("click",k)};var g=function(){document.querySelectorAll(".instance-container").forEach(function(a){if(!a.offsetWidth){return}a.closest(".videotimetabs").querySelectorAll(".videotime-tab-instance .vimeo-embed iframe").forEach(function(b){var c=b.closest(".videotime-tab-instance");Object.assign(c.style,{top:a.offsetTop+"px",left:a.offsetLeft+"px",width:a.offsetWidth+"px"});a.style.minHeight=b.closest(".videotime-tab-instance").offsetHeight+"px";document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){Object.assign(a.style,{top:c.style.top,left:c.style.left,width:c.style.width,height:c.offsetHeight+"px"})})})})},h=function(){document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="none"})},i=function(a){if(a.target.classList.contains("videotimetab-resize-handle")){f=a.target.closest(".tab-pane").querySelector(".videotimetab-resize");a.stopPropagation();a.preventDefault();document.querySelectorAll(".videotime-tab-instance-cover").forEach(function(a){a.style.display="block"})}},j=function(a){document.querySelectorAll(".videotimetab-resize-handle").forEach(function(b){if(b.closest(".tab-pane")&&"block"==document.querySelector(".videotime-tab-instance-cover").style.display){f.style.width=a.pageX-f.getBoundingClientRect().left+"px"}})},k=function(a){if(a.target.matches("[data-action=\"cue\"]")){var d=a.target.closest("a").getAttribute("data-start"),e=d.match(/((([0-9]+):)?(([0-9]+):))?([0-9]+(\.[0-9]+))/),f=a.target.closest(".videotimetabs").querySelector(".vimeo-embed iframe"),g=new b.default(f);a.preventDefault();a.stopPropagation();if(e){g.setCurrentTime(3600*+(e[3]||0)+60*+(e[5]||0)+ +e[6]).then(g.play.bind(g)).catch(c.default.exception)}}}});
//# sourceMappingURL=resize_tab_player.min.js.map
