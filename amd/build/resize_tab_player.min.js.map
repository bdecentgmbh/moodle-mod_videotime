{"version":3,"sources":["../src/resize_tab_player.js"],"names":["initialize","observer","ResizeObserver","resize","document","querySelectorAll","forEach","container","observe","bind","instance","style","position","window","removeEventListener","mousemoveHandler","addEventListener","dragstartHandler","dragendHandler","iframe","width","offsetWidth","pane","minHeight","parentNode","offsetHeight","Object","assign","closest","top","offsetTop","left","offsetLeft","h","e","target","classList","contains","stopPropagation","preventDefault","column","querySelector","pageX","getBoundingClientRect"],"mappings":"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","sourcesContent":["/*\n * Position the Vimeo player within tab layout\n *\n * @package    mod_videotime\n * @module     mod_videotime/resize_tab_player\n * @copyright  2021 bdecent gmbh <https://bdecent.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Intialize listener\n */\nexport const initialize = () => {\n    var observer = new ResizeObserver(resize);\n    document.querySelectorAll('.tab-pane .instance-container, div.videotime-tab-instance').forEach(function (container) {\n        observer.observe(container);\n    }.bind(this));\n    resize();\n    document.querySelectorAll('.videotime-tab-instance').forEach((instance) => {\n        instance.style.position = 'absolute';\n    });\n\n    window.removeEventListener('mousemove', mousemoveHandler);\n    window.addEventListener('mousemove', mousemoveHandler);\n\n    window.removeEventListener('dragstart', dragstartHandler);\n    window.addEventListener('dragstart', dragstartHandler);\n\n    window.removeEventListener('mouseup', dragendHandler);\n    window.addEventListener('mouseup', dragendHandler);\n};\n\n/**\n * Adjust player position when the page configuration is changed\n */\nconst resize = () => {\n    document.querySelectorAll('.tab-pane.active .instance-container').forEach((container) => {\n        document.querySelectorAll('.vimeo-embed iframe').forEach((iframe) => {\n            iframe.width = container.offsetWidth - 10;\n            document.querySelectorAll('.tab-pane').forEach((pane) => {\n                pane.style.minHeight =  iframe.parentNode.parentNode.offsetHeight + 20 + 'px';\n            });\n            Object.assign(iframe.closest('.videotime-tab-instance').style, {\n                top: container.offsetTop + 'px',\n                left: container.offsetLeft + 'px',\n                width: container.offsetWidth + 'px'\n            });\n            container.style.minHeight = iframe.closest('.videotime-tab-instance').offsetHeight + 'px';\n        });\n    });\n};\n\n/**\n * Reset handle when drag ends\n */\nconst dragendHandler = () => {\n    document.querySelectorAll('.videotimetab-resize-handle').forEach((h) => {\n        h.style.position = 'relative';\n    });\n};\n\n/**\n * Prepare to drag border\n *\n * @param {event} e mouse event\n */\nconst dragstartHandler = (e) => {\n    if (e.target.classList.contains('videotimetab-resize-handle')) {\n        e.stopPropagation();\n        e.preventDefault();\n        e.target.style.position = 'absolute';\n    }\n};\n\n/**\n * Resize the content and player to mouse location\n *\n * @param {event} e mouse event\n */\nconst mousemoveHandler = (e) => {\n    document.querySelectorAll('.videotimetab-resize-handle').forEach((h) => {\n        if (h.style.position === 'absolute') {\n            let column = h.closest('.tab-pane').querySelector('.videotimetab-resize');\n            column.style.width = e.pageX - column.getBoundingClientRect().left + 'px';\n        }\n    });\n};\n"],"file":"resize_tab_player.min.js"}