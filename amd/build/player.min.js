!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a.Vimeo=a.Vimeo||{},a.Vimeo.Player=b())}(this,function(){"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}function d(a,b){return 0===a.indexOf(b.toLowerCase())?a:"".concat(b.toLowerCase()).concat(a.substr(0,1).toUpperCase()).concat(a.substr(1))}function e(a){return a instanceof window.HTMLElement}function f(a){return!isNaN(parseFloat(a))&&isFinite(a)&&Math.floor(a)==a}function g(a){return/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(a)}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.id,c=a.url,d=b||c;if(!d)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(f(d))return"https://vimeo.com/".concat(d);if(g(d))return d.replace("http:","https:");if(b)throw new TypeError("“".concat(b,"” is not a valid video id."));throw new TypeError("“".concat(d,"” is not a vimeo.com url."))}function i(a,b){return b={exports:{}},a(b,b.exports),b.exports}function j(a,b,c){var d=B.get(a.element)||{};b in d||(d[b]=[]),d[b].push(c),B.set(a.element,d)}function k(a,b){var c=B.get(a.element)||{};return c[b]||[]}function l(a,b,c){var d=B.get(a.element)||{};if(!d[b])return!0;if(!c)return d[b]=[],B.set(a.element,d),!0;var e=d[b].indexOf(c);return e!==-1&&d[b].splice(e,1),B.set(a.element,d),d[b]&&0===d[b].length}function m(a,b){var c=k(a,b);if(c.length<1)return!1;var d=c.shift();return l(a,b,d),d}function n(a,b){var c=B.get(a);B.set(b,c),B["delete"](a)}function o(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.reduce(function(b,c){var d=a.getAttribute("data-vimeo-".concat(c));return(d||""===d)&&(b[c]=""===d?1:d),b},b)}function p(a,b){var c=a.html;if(!b)throw new TypeError("An element must be provided");if(null!==b.getAttribute("data-vimeo-initialized"))return b.querySelector("iframe");var d=document.createElement("div");return d.innerHTML=c,b.appendChild(d.firstChild),b.setAttribute("data-vimeo-initialized","true"),b.querySelector("iframe")}function q(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return new Promise(function(d,e){if(!g(a))throw new TypeError("“".concat(a,"” is not a vimeo.com url."));var f="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(a),"&domain=").concat(window.location.hostname);for(var h in b)b.hasOwnProperty(h)&&(f+="&".concat(h,"=").concat(encodeURIComponent(b[h])));var i="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;i.open("GET",f,!0),i.onload=function(){if(404===i.status)return void e(new Error("“".concat(a,"” was not found.")));if(403===i.status)return void e(new Error("“".concat(a,"” is not embeddable.")));try{var b=JSON.parse(i.responseText);if(403===b.domain_status_code)return p(b,c),void e(new Error("“".concat(a,"” is not embeddable.")));d(b)}catch(f){e(f)}},i.onerror=function(){var a=i.status?" (".concat(i.status,")"):"";e(new Error("There was an error fetching the embed code from Vimeo".concat(a,".")))},i.send()})}function r(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=[].slice.call(a.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),c=function(a){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(a))};b.forEach(function(a){try{if(null!==a.getAttribute("data-vimeo-defer"))return;var b=o(a),d=h(b);q(d,b,a).then(function(b){return p(b,a)})["catch"](c)}catch(e){c(e)}})}function s(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,b=function(b){if(g(b.origin)&&b.data&&"spacechange"===b.data.event)for(var c=a.querySelectorAll("iframe"),d=0;d<c.length;d++)if(c[d].contentWindow===b.source){var e=c[d].parentElement;e.style.paddingBottom="".concat(b.data.data[0].bottom,"px");break}};window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent&&window.attachEvent("onmessage",b)}function t(a){return"string"==typeof a&&(a=JSON.parse(a)),a}function u(a,b,c){if(a.element.contentWindow&&a.element.contentWindow.postMessage){var d={method:b};void 0!==c&&(d.value=c);var e=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));e>=8&&e<10&&(d=JSON.stringify(d)),a.element.contentWindow.postMessage(d,a.origin)}}function v(a,b){b=t(b);var c,d=[];if(b.event){if("error"===b.event){var e=k(a,b.data.method);e.forEach(function(c){var d=new Error(b.data.message);d.name=b.data.name,c.reject(d),l(a,b.data.method,c)})}d=k(a,"event:".concat(b.event)),c=b.data}else if(b.method){var f=m(a,b.method);f&&(d.push(f),c=b.value)}d.forEach(function(b){try{if("function"==typeof b)return void b.call(a,c);b.resolve(c)}catch(d){}})}var w="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),x="undefined"!=typeof Array.prototype.indexOf,y="undefined"!=typeof window&&"undefined"!=typeof window.postMessage;if(!(w||x&&y))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var z="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(a){function b(a){return Object(a)===a}if(!a.WeakMap){var c=Object.prototype.hasOwnProperty,d=function(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{configurable:!0,writable:!0,value:c}):a[b]=c};a.WeakMap=function(){function a(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(d(this,"_id",f("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function e(a,d){if(!b(a)||!c.call(a,"_id"))throw new TypeError(d+" method called on incompatible receiver "+typeof a)}function f(a){return a+"_"+g()+"."+g()}function g(){return Math.random().toString().substring(2)}return d(a.prototype,"delete",function(a){if(e(this,"delete"),!b(a))return!1;var c=a[this._id];return!(!c||c[0]!==a)&&(delete a[this._id],!0)}),d(a.prototype,"get",function(a){if(e(this,"get"),b(a)){var c=a[this._id];return c&&c[0]===a?c[1]:void 0}}),d(a.prototype,"has",function(a){if(e(this,"has"),!b(a))return!1;var c=a[this._id];return!(!c||c[0]!==a)}),d(a.prototype,"set",function(a,c){if(e(this,"set"),!b(a))throw new TypeError("Invalid value used as weak map key");var f=a[this._id];return f&&f[0]===a?(f[1]=c,this):(d(a,this._id,[a,c]),this)}),d(a,"_polyfill",!0),a}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof z?z:z);var A=i(function(a){!function(b,c,d){c[b]=c[b]||d(),a.exports&&(a.exports=c[b])}("Promise","undefined"!=typeof z?z:z,function(){function a(a,b){m.add(a,b),l||(l=o(m.drain))}function b(a){var b,c=typeof a;return null==a||"object"!=c&&"function"!=c||(b=a.then),"function"==typeof b&&b}function c(){for(var a=0;a<this.chain.length;a++)d(this,1===this.state?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function d(a,c,d){var e,f;try{c===!1?d.reject(a.msg):(e=c===!0?a.msg:c.call(void 0,a.msg),e===d.promise?d.reject(TypeError("Promise-chain cycle")):(f=b(e))?f.call(e,d.resolve,d.reject):d.resolve(e))}catch(g){d.reject(g)}}function e(d){var g,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(g=b(d))?a(function(){var a=new h(i);try{g.call(d,function(){e.apply(a,arguments)},function(){f.apply(a,arguments)})}catch(b){f.call(a,b)}}):(i.msg=d,i.state=1,i.chain.length>0&&a(c,i))}catch(j){f.call(new h(i),j)}}}function f(b){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=b,d.state=2,d.chain.length>0&&a(c,d))}function g(a,b,c,d){for(var e=0;e<b.length;e++)!function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)}(e)}function h(a){this.def=a,this.triggered=!1}function i(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function j(b){if("function"!=typeof b)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var d=new i(this);this.then=function(b,e){var f={success:"function"!=typeof b||b,failure:"function"==typeof e&&e};return f.promise=new this.constructor(function(a,b){if("function"!=typeof a||"function"!=typeof b)throw TypeError("Not a function");f.resolve=a,f.reject=b}),d.chain.push(f),0!==d.state&&a(c,d),f.promise},this["catch"]=function(a){return this.then(void 0,a)};try{b.call(void 0,function(a){e.call(d,a)},function(a){f.call(d,a)})}catch(g){f.call(d,g)}}var k,l,m,n=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{}),k=function(a,b,c,d){return Object.defineProperty(a,b,{value:c,writable:!0,configurable:d!==!1})}}catch(p){k=function(a,b,c){return a[b]=c,a}}m=function(){function a(a,b){this.fn=a,this.self=b,this.next=void 0}var b,c,d;return{add:function(e,f){d=new a(e,f),c?c.next=d:b=d,c=d,d=void 0},drain:function(){var a=b;for(b=c=l=void 0;a;)a.fn.call(a.self),a=a.next}}}();var q=k({},"constructor",j,!1);return j.prototype=q,k(q,"__NPO__",0,!1),k(j,"resolve",function(a){var b=this;return a&&"object"==typeof a&&1===a.__NPO__?a:new b(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");b(a)})}),k(j,"reject",function(a){return new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");c(a)})}),k(j,"all",function(a){var b=this;return"[object Array]"!=n.call(a)?b.reject(TypeError("Not an array")):0===a.length?b.resolve([]):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");var e=a.length,f=Array(e),h=0;g(b,a,function(a,b){f[a]=b,++h===e&&c(f)},d)})}),k(j,"race",function(a){var b=this;return"[object Array]"!=n.call(a)?b.reject(TypeError("Not an array")):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");g(b,a,function(a,b){c(b)},d)})}),j})}),B=new WeakMap,C=["autopause","autoplay","background","byline","color","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","title","transparent","url","width"],D=new WeakMap,E=new WeakMap,F=function(){function b(c){var d=this,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,b),window.jQuery&&c instanceof jQuery&&(c.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),c=c[0]),"undefined"!=typeof document&&"string"==typeof c&&(c=document.getElementById(c)),!e(c))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==c.nodeName){var i=c.querySelector("iframe");i&&(c=i)}if("IFRAME"===c.nodeName&&!g(c.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(D.has(c))return D.get(c);this.element=c,this.origin="*";var j=new A(function(a,b){var e=function(b){if(g(b.origin)&&d.element.contentWindow===b.source){"*"===d.origin&&(d.origin=b.origin);var c=t(b.data),e="event"in c&&"ready"===c.event,f="method"in c&&"ping"===c.method;return e||f?(d.element.setAttribute("data-ready","true"),void a()):void v(d,c)}};if(window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e),"IFRAME"!==d.element.nodeName){var i=o(c,f),j=h(i);q(j,i,c).then(function(a){var b=p(a,c);return d.element=b,d._originalElement=c,n(c,b),D.set(d.element,d),a})["catch"](function(a){return b(a)})}});return E.set(this,j),D.set(this.element,this),"IFRAME"===this.element.nodeName&&u(this,"ping"),this}return c(b,[{key:"callMethod",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new A(function(d,e){return b.ready().then(function(){j(b,a,{resolve:d,reject:e}),u(b,a,c)})["catch"](function(a){e(a)})})}},{key:"get",value:function(a){var b=this;return new A(function(c,e){return a=d(a,"get"),b.ready().then(function(){j(b,a,{resolve:c,reject:e}),u(b,a)})})}},{key:"set",value:function(a,b){var c=this;return A.resolve(b).then(function(b){if(a=d(a,"set"),void 0===b||null===b)throw new TypeError("There must be a value to set.");return c.ready().then(function(){return new A(function(d,e){j(c,a,{resolve:d,reject:e}),u(c,a,b)})})})}},{key:"on",value:function(a,b){if(!a)throw new TypeError("You must pass an event name.");if(!b)throw new TypeError("You must pass a callback function.");if("function"!=typeof b)throw new TypeError("The callback must be a function.");var c=k(this,"event:".concat(a));0===c.length&&this.callMethod("addEventListener",a)["catch"](function(){}),j(this,"event:".concat(a),b)}},{key:"off",value:function(a,b){if(!a)throw new TypeError("You must pass an event name.");if(b&&"function"!=typeof b)throw new TypeError("The callback must be a function.");var c=l(this,"event:".concat(a),b);c&&this.callMethod("removeEventListener",a)["catch"](function(a){})}},{key:"loadVideo",value:function(a){return this.callMethod("loadVideo",a)}},{key:"ready",value:function(){var a=E.get(this)||new A(function(a,b){b(new Error("Unknown player. Probably unloaded."))});return A.resolve(a)}},{key:"addCuePoint",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:a,data:b})}},{key:"removeCuePoint",value:function(a){return this.callMethod("removeCuePoint",a)}},{key:"enableTextTrack",value:function(a,b){if(!a)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:a,kind:b})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var a=this;return new A(function(b){E["delete"](a),D["delete"](a.element),a._originalElement&&(D["delete"](a._originalElement),a._originalElement.removeAttribute("data-vimeo-initialized")),a.element&&"IFRAME"===a.element.nodeName&&a.element.remove(),b()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(a){return this.set("autopause",a)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(a){return this.set("color",a)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(a){return this.set("currentTime",a)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(a){return this.set("loop",a)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(a){return this.set("playbackRate",a)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(a){return this.set("volume",a)}}]),b}();return w||!window.Vimeo||window.Vimeo.Player||(r(),s()),F});