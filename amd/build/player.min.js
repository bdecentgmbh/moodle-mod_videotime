function _typeof(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define ("mod_videotime/player",t):(e="undefined"!=typeof globalThis?globalThis:e||self,(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t()))})(this,function(){'use strict';function e(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function t(e,t){for(var n=0,a;n<t.length;n++){a=t[n];a.enumerable=a.enumerable||!1;a.configurable=!0;if("value"in a)a.writable=!0;Object.defineProperty(e,a.key,a)}}function n(e,n,a){if(n)t(e.prototype,n);if(a)t(e,a);return e}var w="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);function a(e,t){if(0===e.indexOf(t.toLowerCase())){return e}return"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function l(e){return!!(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function r(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function o(e){return /^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function i(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.id,n=e.url,a=t||n;if(!a){throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.")}if(r(a)){return"https://vimeo.com/".concat(a)}if(o(a)){return a.replace("http:","https:")}if(t){throw new TypeError("\u201C".concat(t,"\u201D is not a valid video id."))}throw new TypeError("\u201C".concat(a,"\u201D is not a vimeo.com url."))}var _="undefined"!=typeof Array.prototype.indexOf,P="undefined"!=typeof window&&"undefined"!=typeof window.postMessage;if(!w&&(!_||!P)){throw new Error("Sorry, the Vimeo Player API is not available in this browser.")}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(e){if(e.WeakMap){return}var n=Object.prototype.hasOwnProperty,a=function(e,t,n){if(Object.defineProperty){Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n})}else{e[t]=n}};e.WeakMap=function(){function e(){if(void 0===this){throw new TypeError("Constructor WeakMap requires 'new'")}a(this,"_id",r("_WeakMap"));if(0<arguments.length){throw new TypeError("WeakMap iterable is not supported")}}a(e.prototype,"delete",function(e){l(this,"delete");if(!t(e)){return!1}var n=e[this._id];if(n&&n[0]===e){delete e[this._id];return!0}return!1});a(e.prototype,"get",function(e){l(this,"get");if(!t(e)){return}var n=e[this._id];if(n&&n[0]===e){return n[1]}});a(e.prototype,"has",function(e){l(this,"has");if(!t(e)){return!1}var n=e[this._id];if(n&&n[0]===e){return!0}return!1});a(e.prototype,"set",function(e,n){l(this,"set");if(!t(e)){throw new TypeError("Invalid value used as weak map key")}var r=e[this._id];if(r&&r[0]===e){r[1]=n;return this}a(e,this._id,[e,n]);return this});function l(e,a){if(!t(e)||!n.call(e,"_id")){throw new TypeError(a+" method called on incompatible receiver "+_typeof(e))}}function r(e){return e+"_"+o()+"."+o()}function o(){return Math.random().toString().substring(2)}a(e,"_polyfill",!0);return e}();function t(e){return Object(e)===e}})("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof x?x:x);var F=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(t,n,a){n[t]=n[t]||a();if(e.exports){e.exports=n[t]}})("Promise","undefined"!=typeof x?x:x,function(){var c,d,m,g=Object.prototype.toString,p="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{});c=function(e,t,n,a){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==a})}}catch(e){c=function(e,t,n){e[t]=n;return e}}m=function(){var t,n,a;function e(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function(l,r){a=new e(l,r);if(n){n.next=a}else{t=a}n=a;a=void 0},drain:function(){var e=t;t=n=d=void 0;while(e){e.fn.call(e.self);e=e.next}}}}();function e(e,t){m.add(e,t);if(!d){d=p(m.drain)}}function t(e){var t,n=_typeof(e);if(null!=e&&("object"==n||"function"==n)){t=e.then}return"function"==typeof t?t:!1}function n(){for(var e=0;e<this.chain.length;e++){a(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function a(e,n,a){var l,r;try{if(!1===n){a.reject(e.msg)}else{if(!0===n){l=e.msg}else{l=n.call(void 0,e.msg)}if(l===a.promise){a.reject(TypeError("Promise-chain cycle"))}else if(r=t(l)){r.call(l,a.resolve,a.reject)}else{a.resolve(l)}}}catch(e){a.reject(e)}}function l(a){var o,u=this;if(u.triggered){return}u.triggered=!0;if(u.def){u=u.def}try{if(o=t(a)){e(function(){var e=new i(u);try{o.call(a,function(){l.apply(e,arguments)},function(){r.apply(e,arguments)})}catch(t){r.call(e,t)}})}else{u.msg=a;u.state=1;if(0<u.chain.length){e(n,u)}}}catch(e){r.call(new i(u),e)}}function r(t){var a=this;if(a.triggered){return}a.triggered=!0;if(a.def){a=a.def}a.msg=t;a.state=2;if(0<a.chain.length){e(n,a)}}function o(e,t,n,a){for(var l=0;l<t.length;l++){(function(l){e.resolve(t[l]).then(function(e){n(l,e)},a)})(l)}}function i(e){this.def=e;this.triggered=!1}function u(e){this.promise=e;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function s(t){if("function"!=typeof t){throw TypeError("Not a function")}if(0!==this.__NPO__){throw TypeError("Not a promise")}this.__NPO__=1;var a=new u(this);this.then=function(t,l){var r={success:"function"==typeof t?t:!0,failure:"function"==typeof l?l:!1};r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t){throw TypeError("Not a function")}r.resolve=e;r.reject=t});a.chain.push(r);if(0!==a.state){e(n,a)}return r.promise};this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){l.call(a,e)},function(e){r.call(a,e)})}catch(e){r.call(a,e)}}var h=c({},"constructor",s,!1);s.prototype=h;c(h,"__NPO__",0,!1);c(s,"resolve",function(e){var t=this;if(e&&"object"==_typeof(e)&&1===e.__NPO__){return e}return new t(function(t,n){if("function"!=typeof t||"function"!=typeof n){throw TypeError("Not a function")}t(e)})});c(s,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n){throw TypeError("Not a function")}n(e)})});c(s,"all",function(e){var t=this;if("[object Array]"!=g.call(e)){return t.reject(TypeError("Not an array"))}if(0===e.length){return t.resolve([])}return new t(function(n,a){if("function"!=typeof n||"function"!=typeof a){throw TypeError("Not a function")}var l=e.length,r=Array(l),i=0;o(t,e,function(e,t){r[e]=t;if(++i===l){n(r)}},a)})});c(s,"race",function(e){var t=this;if("[object Array]"!=g.call(e)){return t.reject(TypeError("Not an array"))}return new t(function(n,a){if("function"!=typeof n||"function"!=typeof a){throw TypeError("Not a function")}o(t,e,function(e,t){n(t)},a)})});return s})}),N=new WeakMap;function u(e,t,n){var a=N.get(e.element)||{};if(!(t in a)){a[t]=[]}a[t].push(n);N.set(e.element,a)}function s(e,t){var n=N.get(e.element)||{};return n[t]||[]}function c(e,t,n){var a=N.get(e.element)||{};if(!a[t]){return!0}if(!n){a[t]=[];N.set(e.element,a);return!0}var l=a[t].indexOf(n);if(-1!==l){a[t].splice(l,1)}N.set(e.element,a);return a[t]&&0===a[t].length}function d(e,t){var n=s(e,t);if(1>n.length){return!1}var a=n.shift();c(e,t,a);return a}function m(e,t){var n=N.get(e);N.set(t,n);N.delete(e)}var M=["autopause","autoplay","background","byline","color","controls","dnt","height","id","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function g(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return M.reduce(function(t,n){var a=e.getAttribute("data-vimeo-".concat(n));if(a||""===a){t[n]=""===a?1:a}return t},t)}function p(e,t){var n=e.html;if(!t){throw new TypeError("An element must be provided")}if(null!==t.getAttribute("data-vimeo-initialized")){return t.querySelector("iframe")}var a=document.createElement("div");a.innerHTML=n;t.appendChild(a.firstChild);t.setAttribute("data-vimeo-initialized","true");return t.querySelector("iframe")}function h(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;return new Promise(function(a,l){if(!o(e)){throw new TypeError("\u201C".concat(e,"\u201D is not a vimeo.com url."))}var r="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var i in t){if(t.hasOwnProperty(i)){r+="&".concat(i,"=").concat(encodeURIComponent(t[i]))}}var u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",r,!0);u.onload=function(){if(404===u.status){l(new Error("\u201C".concat(e,"\u201D was not found.")));return}if(403===u.status){l(new Error("\u201C".concat(e,"\u201D is not embeddable.")));return}try{var t=JSON.parse(u.responseText);if(403===t.domain_status_code){p(t,n);l(new Error("\u201C".concat(e,"\u201D is not embeddable.")));return}a(t)}catch(e){l(e)}};u.onerror=function(){var e=u.status?" (".concat(u.status,")"):"";l(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))};u.send()})}function v(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){if("console"in window&&console.error){console.error("There was an error creating an embed: ".concat(e))}};t.forEach(function(e){try{if(null!==e.getAttribute("data-vimeo-defer")){return}var t=g(e),a=i(t);h(a,t,e).then(function(t){return p(t,e)}).catch(n)}catch(e){n(e)}})}function f(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:document;if(window.VimeoPlayerResizeEmbeds_){return}window.VimeoPlayerResizeEmbeds_=!0;window.addEventListener("message",function(t){if(!o(t.origin)){return}if(!t.data||"spacechange"!==t.data.event){return}for(var n=e.querySelectorAll("iframe"),a=0;a<n.length;a++){if(n[a].contentWindow!==t.source){continue}var l=n[a].parentElement;l.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}})}function y(e){if("string"==typeof e){try{e=JSON.parse(e)}catch(e){console.warn(e);return{}}}return e}function k(e,t,n){if(!e.element.contentWindow||!e.element.contentWindow.postMessage){return}var a={method:t};if(n!==void 0){a.value=n}var l=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));if(8<=l&&10>l){a=JSON.stringify(a)}e.element.contentWindow.postMessage(a,e.origin)}function b(e,t){t=y(t);var n=[],a;if(t.event){if("error"===t.event){var l=s(e,t.data.method);l.forEach(function(n){var a=new Error(t.data.message);a.name=t.data.name;n.reject(a);c(e,t.data.method,n)})}n=s(e,"event:".concat(t.event));a=t.data}else if(t.method){var r=d(e,t.method);if(r){n.push(r);a=t.value}}n.forEach(function(t){try{if("function"==typeof t){t.call(e,a);return}t.resolve(a)}catch(t){}})}function E(){var e=function(){var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,a=t.length,l={};for(;n<a;n++){e=t[n];if(e&&e[1]in document){for(n=0;n<e.length;n++){l[t[0][n]]=e[n]}return l}}return!1}(),t={fullscreenchange:e.fullscreenchange,fullscreenerror:e.fullscreenerror},n={request:function(t){return new Promise(function(a,l){var r=function e(){n.off("fullscreenchange",e);a()};n.on("fullscreenchange",r);t=t||document.documentElement;var o=t[e.requestFullscreen]();if(o instanceof Promise){o.then(r).catch(l)}})},exit:function(){return new Promise(function(t,a){if(!n.isFullscreen){t();return}var l=function e(){n.off("fullscreenchange",e);t()};n.on("fullscreenchange",l);var r=document[e.exitFullscreen]();if(r instanceof Promise){r.then(l).catch(a)}})},on:function(e,n){var a=t[e];if(a){document.addEventListener(a,n)}},off:function(e,n){var a=t[e];if(a){document.removeEventListener(a,n)}}};Object.defineProperties(n,{isFullscreen:{get:function(){return!!document[e.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[e.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[e.fullscreenEnabled]}}});return n}var C=new WeakMap,T=new WeakMap,A={},j=function(){function t(n){var a=this,r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};e(this,t);if(window.jQuery&&n instanceof jQuery){if(1<n.length&&window.console&&console.warn){console.warn("A jQuery object with multiple elements was passed, using the first element.")}n=n[0]}if("undefined"!=typeof document&&"string"==typeof n){n=document.getElementById(n)}if(!l(n)){throw new TypeError("You must pass either a valid element or a valid id.")}if("IFRAME"!==n.nodeName){var s=n.querySelector("iframe");if(s){n=s}}if("IFRAME"===n.nodeName&&!o(n.getAttribute("src")||"")){throw new Error("The player element passed isn\u2019t a Vimeo embed.")}if(C.has(n)){return C.get(n)}this._window=n.ownerDocument.defaultView;this.element=n;this.origin="*";var d=new F(function(e,t){a._onMessage=function(n){if(!o(n.origin)||a.element.contentWindow!==n.source){return}if("*"===a.origin){a.origin=n.origin}var l=y(n.data),r=l&&"error"===l.event,i=r&&l.data&&"ready"===l.data.method;if(i){var u=new Error(l.data.message);u.name=l.data.name;t(u);return}var s=l&&"ready"===l.event,c=l&&"ping"===l.method;if(s||c){a.element.setAttribute("data-ready","true");e();return}b(a,l)};a._window.addEventListener("message",a._onMessage);if("IFRAME"!==a.element.nodeName){var l=g(n,r),u=i(l);h(u,l,n).then(function(e){var t=p(e,n);a.element=t;a._originalElement=n;m(n,t);C.set(a.element,a);return e}).catch(t)}});T.set(this,d);C.set(this.element,this);if("IFRAME"===this.element.nodeName){k(this,"ping")}if(A.isEnabled){var v=function(){return A.exit()};A.on("fullscreenchange",function(){if(A.isFullscreen){u(a,"event:exitFullscreen",v)}else{c(a,"event:exitFullscreen",v)}a.ready().then(function(){k(a,"fullscreenchange",A.isFullscreen)})})}return this}n(t,[{key:"callMethod",value:function(e){var t=this,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new F(function(a,l){return t.ready().then(function(){u(t,e,{resolve:a,reject:l});k(t,e,n)}).catch(l)})}},{key:"get",value:function(e){var t=this;return new F(function(n,l){e=a(e,"get");return t.ready().then(function(){u(t,e,{resolve:n,reject:l});k(t,e)}).catch(l)})}},{key:"set",value:function(e,t){var n=this;return new F(function(l,r){e=a(e,"set");if(t===void 0||null===t){throw new TypeError("There must be a value to set.")}return n.ready().then(function(){u(n,e,{resolve:l,reject:r});k(n,e,t)}).catch(r)})}},{key:"on",value:function(e,t){if(!e){throw new TypeError("You must pass an event name.")}if(!t){throw new TypeError("You must pass a callback function.")}if("function"!=typeof t){throw new TypeError("The callback must be a function.")}var n=s(this,"event:".concat(e));if(0===n.length){this.callMethod("addEventListener",e).catch(function(){})}u(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e){throw new TypeError("You must pass an event name.")}if(t&&"function"!=typeof t){throw new TypeError("The callback must be a function.")}var n=c(this,"event:".concat(e),t);if(n){this.callMethod("removeEventListener",e).catch(function(){})}}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=T.get(this)||new F(function(e,t){t(new Error("Unknown player. Probably unloaded."))});return F.resolve(e)}},{key:"addCuePoint",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e){throw new TypeError("You must pass a language.")}return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){if(A.isEnabled){return A.request(this.element)}return this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){if(A.isEnabled){return A.exit()}return this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){if(A.isEnabled){return F.resolve(A.isFullscreen)}return this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new F(function(t){T.delete(e);C.delete(e.element);if(e._originalElement){C.delete(e._originalElement);e._originalElement.removeAttribute("data-vimeo-initialized")}if(e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode){if(e.element.parentNode.parentNode&&e._originalElement&&e._originalElement!==e.element.parentNode){e.element.parentNode.parentNode.removeChild(e.element.parentNode)}else{e.element.parentNode.removeChild(e.element)}}if(e.element&&"DIV"===e.element.nodeName&&e.element.parentNode){e.element.removeAttribute("data-vimeo-initialized");var n=e.element.querySelector("iframe");if(n&&n.parentNode){if(n.parentNode.parentNode&&e._originalElement&&e._originalElement!==n.parentNode){n.parentNode.parentNode.removeChild(n.parentNode)}else{n.parentNode.removeChild(n)}}}e._window.removeEventListener("message",e._onMessage);t()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(e){return this.set("cameraProps",e)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(e){return this.set("quality",e)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}]);return t}();if(!w){A=E();v();f()}return j});
//# sourceMappingURL=player.min.js.map
