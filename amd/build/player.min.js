function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define ("mod_videotime/player",b):(a.Vimeo=a.Vimeo||{},a.Vimeo.Player=b())})(this,function(){'use strict';function a(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function b(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function c(a,c,d){if(c)b(a.prototype,c);if(d)b(a,d);return a}var v="undefined"!=typeof global&&"[object global]"==={}.toString.call(global);function d(a,b){if(0===a.indexOf(b.toLowerCase())){return a}return"".concat(b.toLowerCase()).concat(a.substr(0,1).toUpperCase()).concat(a.substr(1))}function e(a){return a instanceof window.HTMLElement}function f(a){return!isNaN(parseFloat(a))&&isFinite(a)&&Math.floor(a)==a}function g(a){return /^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(a)}function h(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.id,c=a.url,d=b||c;if(!d){throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.")}if(f(d)){return"https://vimeo.com/".concat(d)}if(g(d)){return d.replace("http:","https:")}if(b){throw new TypeError("\u201C".concat(b,"\u201D is not a valid video id."))}throw new TypeError("\u201C".concat(d,"\u201D is not a vimeo.com url."))}var w="undefined"!=typeof Array.prototype.indexOf,x="undefined"!=typeof window&&"undefined"!=typeof window.postMessage;if(!v&&(!w||!x)){throw new Error("Sorry, the Vimeo Player API is not available in this browser.")}var y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(a){if(a.WeakMap){return}var c=Object.prototype.hasOwnProperty,d=function(a,b,c){if(Object.defineProperty){Object.defineProperty(a,b,{configurable:!0,writable:!0,value:c})}else{a[b]=c}};a.WeakMap=function(){function a(){if(void 0===this){throw new TypeError("Constructor WeakMap requires 'new'")}d(this,"_id",f("_WeakMap"));if(0<arguments.length){throw new TypeError("WeakMap iterable is not supported")}}d(a.prototype,"delete",function(a){e(this,"delete");if(!b(a)){return!1}var c=a[this._id];if(c&&c[0]===a){delete a[this._id];return!0}return!1});d(a.prototype,"get",function(a){e(this,"get");if(!b(a)){return}var c=a[this._id];if(c&&c[0]===a){return c[1]}});d(a.prototype,"has",function(a){e(this,"has");if(!b(a)){return!1}var c=a[this._id];if(c&&c[0]===a){return!0}return!1});d(a.prototype,"set",function(a,c){e(this,"set");if(!b(a)){throw new TypeError("Invalid value used as weak map key")}var f=a[this._id];if(f&&f[0]===a){f[1]=c;return this}d(a,this._id,[a,c]);return this});function e(a,d){if(!b(a)||!c.call(a,"_id")){throw new TypeError(d+" method called on incompatible receiver "+_typeof(a))}}function f(a){return a+"_"+g()+"."+g()}function g(){return Math.random().toString().substring(2)}d(a,"_polyfill",!0);return a}();function b(a){return Object(a)===a}})("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof y?y:y);var z=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){(function(b,c,d){c[b]=c[b]||d();if(a.exports){a.exports=c[b]}})("Promise","undefined"!=typeof y?y:y,function(){var k,l,m,n=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{});k=function(a,b,c,d){return Object.defineProperty(a,b,{value:c,writable:!0,configurable:!1!==d})}}catch(a){k=function(a,b,c){a[b]=c;return a}}m=function(){var b,c,d;function a(a,b){this.fn=a;this.self=b;this.next=void 0}return{add:function(e,f){d=new a(e,f);if(c){c.next=d}else{b=d}c=d;d=void 0},drain:function(){var a=b;b=c=l=void 0;while(a){a.fn.call(a.self);a=a.next}}}}();function a(a,b){m.add(a,b);if(!l){l=o(m.drain)}}function b(a){var b,c=_typeof(a);if(null!=a&&("object"==c||"function"==c)){b=a.then}return"function"==typeof b?b:!1}function c(){for(var a=0;a<this.chain.length;a++){d(this,1===this.state?this.chain[a].success:this.chain[a].failure,this.chain[a])}this.chain.length=0}function d(a,c,d){var e,f;try{if(!1===c){d.reject(a.msg)}else{if(!0===c){e=a.msg}else{e=c.call(void 0,a.msg)}if(e===d.promise){d.reject(TypeError("Promise-chain cycle"))}else if(f=b(e)){f.call(e,d.resolve,d.reject)}else{d.resolve(e)}}}catch(a){d.reject(a)}}function e(d){var g,i=this;if(i.triggered){return}i.triggered=!0;if(i.def){i=i.def}try{if(g=b(d)){a(function(){var a=new h(i);try{g.call(d,function(){e.apply(a,arguments)},function(){f.apply(a,arguments)})}catch(b){f.call(a,b)}})}else{i.msg=d;i.state=1;if(0<i.chain.length){a(c,i)}}}catch(a){f.call(new h(i),a)}}function f(b){var d=this;if(d.triggered){return}d.triggered=!0;if(d.def){d=d.def}d.msg=b;d.state=2;if(0<d.chain.length){a(c,d)}}function g(a,b,c,d){for(var e=0;e<b.length;e++){(function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)})(e)}}function h(a){this.def=a;this.triggered=!1}function i(a){this.promise=a;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function j(b){if("function"!=typeof b){throw TypeError("Not a function")}if(0!==this.__NPO__){throw TypeError("Not a promise")}this.__NPO__=1;var d=new i(this);this.then=function(b,e){var f={success:"function"==typeof b?b:!0,failure:"function"==typeof e?e:!1};f.promise=new this.constructor(function(a,b){if("function"!=typeof a||"function"!=typeof b){throw TypeError("Not a function")}f.resolve=a;f.reject=b});d.chain.push(f);if(0!==d.state){a(c,d)}return f.promise};this["catch"]=function(a){return this.then(void 0,a)};try{b.call(void 0,function(a){e.call(d,a)},function(a){f.call(d,a)})}catch(a){f.call(d,a)}}var p=k({},"constructor",j,!1);j.prototype=p;k(p,"__NPO__",0,!1);k(j,"resolve",function(a){var b=this;if(a&&"object"==_typeof(a)&&1===a.__NPO__){return a}return new b(function(b,c){if("function"!=typeof b||"function"!=typeof c){throw TypeError("Not a function")}b(a)})});k(j,"reject",function(a){return new this(function(b,c){if("function"!=typeof b||"function"!=typeof c){throw TypeError("Not a function")}c(a)})});k(j,"all",function(a){var b=this;if("[object Array]"!=n.call(a)){return b.reject(TypeError("Not an array"))}if(0===a.length){return b.resolve([])}return new b(function(c,d){if("function"!=typeof c||"function"!=typeof d){throw TypeError("Not a function")}var e=a.length,f=Array(e),h=0;g(b,a,function(a,b){f[a]=b;if(++h===e){c(f)}},d)})});k(j,"race",function(a){var b=this;if("[object Array]"!=n.call(a)){return b.reject(TypeError("Not an array"))}return new b(function(c,d){if("function"!=typeof c||"function"!=typeof d){throw TypeError("Not a function")}g(b,a,function(a,b){c(b)},d)})});return j})}),A=new WeakMap;function i(a,b,c){var d=A.get(a.element)||{};if(!(b in d)){d[b]=[]}d[b].push(c);A.set(a.element,d)}function j(a,b){var c=A.get(a.element)||{};return c[b]||[]}function k(a,b,c){var d=A.get(a.element)||{};if(!d[b]){return!0}if(!c){d[b]=[];A.set(a.element,d);return!0}var e=d[b].indexOf(c);if(-1!==e){d[b].splice(e,1)}A.set(a.element,d);return d[b]&&0===d[b].length}function l(a,b){var c=j(a,b);if(1>c.length){return!1}var d=c.shift();k(a,b,d);return d}function m(a,b){var c=A.get(a);A.set(b,c);A.delete(a)}var B=["autopause","autoplay","background","byline","color","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","title","transparent","url","width"];function n(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return B.reduce(function(b,c){var d=a.getAttribute("data-vimeo-".concat(c));if(d||""===d){b[c]=""===d?1:d}return b},b)}function o(a,b){var c=a.html;if(!b){throw new TypeError("An element must be provided")}if(null!==b.getAttribute("data-vimeo-initialized")){return b.querySelector("iframe")}var d=document.createElement("div");d.innerHTML=c;b.appendChild(d.firstChild);b.setAttribute("data-vimeo-initialized","true");return b.querySelector("iframe")}function p(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=2<arguments.length?arguments[2]:void 0;return new Promise(function(d,e){if(!g(a)){throw new TypeError("\u201C".concat(a,"\u201D is not a vimeo.com url."))}var f="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(a),"&domain=").concat(window.location.hostname);for(var h in b){if(b.hasOwnProperty(h)){f+="&".concat(h,"=").concat(encodeURIComponent(b[h]))}}var i="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;i.open("GET",f,!0);i.onload=function(){if(404===i.status){e(new Error("\u201C".concat(a,"\u201D was not found.")));return}if(403===i.status){e(new Error("\u201C".concat(a,"\u201D is not embeddable.")));return}try{var b=JSON.parse(i.responseText);if(403===b.domain_status_code){o(b,c);e(new Error("\u201C".concat(a,"\u201D is not embeddable.")));return}d(b)}catch(a){e(a)}};i.onerror=function(){var a=i.status?" (".concat(i.status,")"):"";e(new Error("There was an error fetching the embed code from Vimeo".concat(a,".")))};i.send()})}function q(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:document,b=[].slice.call(a.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),c=function(a){if("console"in window&&console.error){console.error("There was an error creating an embed: ".concat(a))}};b.forEach(function(a){try{if(null!==a.getAttribute("data-vimeo-defer")){return}var b=n(a),d=h(b);p(d,b,a).then(function(b){return o(b,a)}).catch(c)}catch(a){c(a)}})}function r(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:document,b=function(b){if(!g(b.origin)){return}if(!b.data||"spacechange"!==b.data.event){return}for(var c=a.querySelectorAll("iframe"),d=0;d<c.length;d++){if(c[d].contentWindow!==b.source){continue}var e=c[d].parentElement;e.style.paddingBottom="".concat(b.data.data[0].bottom,"px");break}};if(window.addEventListener){window.addEventListener("message",b,!1)}else if(window.attachEvent){window.attachEvent("onmessage",b)}}function s(a){if("string"==typeof a){a=JSON.parse(a)}return a}function t(a,b,c){if(!a.element.contentWindow||!a.element.contentWindow.postMessage){return}var d={method:b};if(c!==void 0){d.value=c}var e=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));if(8<=e&&10>e){d=JSON.stringify(d)}a.element.contentWindow.postMessage(d,a.origin)}function u(a,b){b=s(b);var c=[],d;if(b.event){if("error"===b.event){var e=j(a,b.data.method);e.forEach(function(c){var d=new Error(b.data.message);d.name=b.data.name;c.reject(d);k(a,b.data.method,c)})}c=j(a,"event:".concat(b.event));d=b.data}else if(b.method){var f=l(a,b.method);if(f){c.push(f);d=b.value}}c.forEach(function(b){try{if("function"==typeof b){b.call(a,d);return}b.resolve(d)}catch(a){}})}var C=new WeakMap,D=new WeakMap,E=function(){function b(c){var d=this,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};a(this,b);if(window.jQuery&&c instanceof jQuery){if(1<c.length&&window.console&&console.warn){console.warn("A jQuery object with multiple elements was passed, using the first element.")}c=c[0]}if("undefined"!=typeof document&&"string"==typeof c){c=document.getElementById(c)}if(!e(c)){throw new TypeError("You must pass either a valid element or a valid id.")}if("IFRAME"!==c.nodeName){var i=c.querySelector("iframe");if(i){c=i}}if("IFRAME"===c.nodeName&&!g(c.getAttribute("src")||"")){throw new Error("The player element passed isn\u2019t a Vimeo embed.")}if(C.has(c)){return C.get(c)}this.element=c;this.origin="*";var j=new z(function(a,b){var e=function(b){if(!g(b.origin)||d.element.contentWindow!==b.source){return}if("*"===d.origin){d.origin=b.origin}var c=s(b.data),e="event"in c&&"ready"===c.event,f="method"in c&&"ping"===c.method;if(e||f){d.element.setAttribute("data-ready","true");a();return}u(d,c)};if(window.addEventListener){window.addEventListener("message",e,!1)}else if(window.attachEvent){window.attachEvent("onmessage",e)}if("IFRAME"!==d.element.nodeName){var i=n(c,f),j=h(i);p(j,i,c).then(function(a){var b=o(a,c);d.element=b;d._originalElement=c;m(c,b);C.set(d.element,d);return a}).catch(function(a){return b(a)})}});D.set(this,j);C.set(this.element,this);if("IFRAME"===this.element.nodeName){t(this,"ping")}return this}c(b,[{key:"callMethod",value:function(a){var b=this,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new z(function(d,e){return b.ready().then(function(){i(b,a,{resolve:d,reject:e});t(b,a,c)}).catch(function(a){e(a)})})}},{key:"get",value:function(a){var b=this;return new z(function(c,e){a=d(a,"get");return b.ready().then(function(){i(b,a,{resolve:c,reject:e});t(b,a)})})}},{key:"set",value:function(a,b){var c=this;return z.resolve(b).then(function(b){a=d(a,"set");if(b===void 0||null===b){throw new TypeError("There must be a value to set.")}return c.ready().then(function(){return new z(function(d,e){i(c,a,{resolve:d,reject:e});t(c,a,b)})})})}},{key:"on",value:function(a,b){if(!a){throw new TypeError("You must pass an event name.")}if(!b){throw new TypeError("You must pass a callback function.")}if("function"!=typeof b){throw new TypeError("The callback must be a function.")}var c=j(this,"event:".concat(a));if(0===c.length){this.callMethod("addEventListener",a).catch(function(){})}i(this,"event:".concat(a),b)}},{key:"off",value:function(a,b){if(!a){throw new TypeError("You must pass an event name.")}if(b&&"function"!=typeof b){throw new TypeError("The callback must be a function.")}var c=k(this,"event:".concat(a),b);if(c){this.callMethod("removeEventListener",a).catch(function(){})}}},{key:"loadVideo",value:function(a){return this.callMethod("loadVideo",a)}},{key:"ready",value:function(){var a=D.get(this)||new z(function(a,b){b(new Error("Unknown player. Probably unloaded."))});return z.resolve(a)}},{key:"addCuePoint",value:function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:a,data:b})}},{key:"removeCuePoint",value:function(a){return this.callMethod("removeCuePoint",a)}},{key:"enableTextTrack",value:function(a,b){if(!a){throw new TypeError("You must pass a language.")}return this.callMethod("enableTextTrack",{language:a,kind:b})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var a=this;return new z(function(b){D.delete(a);C.delete(a.element);if(a._originalElement){C.delete(a._originalElement);a._originalElement.removeAttribute("data-vimeo-initialized")}if(a.element&&"IFRAME"===a.element.nodeName){a.element.remove()}b()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(a){return this.set("autopause",a)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(a){return this.set("color",a)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(a){return this.set("currentTime",a)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(a){return this.set("loop",a)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(a){return this.set("playbackRate",a)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(a){return this.set("volume",a)}}]);return b}();if(!v&&window.Vimeo&&!window.Vimeo.Player){q();r()}return E});
//# sourceMappingURL=player.min.js.map
